<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“§ Mailer - Production-Grade Bulk Email Service</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            background: white;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .status-badge {
            display: inline-block;
            background: #22c55e;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        h1 {
            font-size: 48px;
            margin-bottom: 10px;
            color: #1f2937;
        }
        
        .subtitle {
            font-size: 18px;
            color: #6b7280;
            margin-bottom: 40px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .stat {
            padding: 20px;
            background: #f9fafb;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
            text-transform: uppercase;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        
        .card h2 {
            color: #1f2937;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .card-link {
            display: block;
            padding: 12px 16px;
            background: #f9fafb;
            color: #667eea;
            text-decoration: none;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .card-link:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateX(4px);
        }
        
        .card-link.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-weight: 600;
            padding: 14px 16px;
        }
        
        .card-link.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .issues-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .issue {
            padding: 12px 16px;
            background: #f3f4f6;
            border-radius: 6px;
            border-left: 3px solid #22c55e;
            font-size: 13px;
        }
        
        .issue.high {
            border-left-color: #f97316;
        }
        
        .issue.critical {
            border-left-color: #ef4444;
        }
        
        footer {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-top: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            font-size: 13px;
            color: #6b7280;
        }
        
        .expandable {
            margin-top: 20px;
        }

        .expandable-header {
            cursor: pointer;
            padding: 15px;
            background: #f3f4f6;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            transition: all 0.2s;
        }

        .expandable-header:hover {
            background: #e5e7eb;
        }

        .expandable-header.open {
            background: #dbeafe;
        }

        .expandable-icon {
            transition: transform 0.3s;
            font-size: 20px;
        }

        .expandable-icon.open {
            transform: rotate(180deg);
        }

        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .expandable-content.open {
            max-height: 2000px;
            transition: max-height 0.5s ease;
        }

        .expandable-content-inner {
            padding: 20px;
            background: #f9fafb;
            border-left: 3px solid #667eea;
            border-radius: 0 6px 6px 6px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin: 15px 0;
        }

        .feature-item {
            padding: 12px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid #667eea;
            font-size: 14px;
        }

        .code-block {
            background: #1f2937;
            color: #e5e7eb;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
            line-height: 1.5;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .tech-badge {
            padding: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 6px;
            text-align: center;
            font-weight: 600;
            font-size: 13px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            border-bottom: 2px solid #e5e7eb;
            overflow-x: auto;
        }

        .tab {
            padding: 12px 16px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 36px;
            }

            .tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="status-badge">âœ… Production Ready</div>
            <h1>ğŸ“§ Mailer</h1>
            <p class="subtitle">Enterprise-Grade Bulk Email Service with Queue-Based Processing</p>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-number">12+</div>
                    <div class="stat-label">Features</div>
                </div>
                <div class="stat">
                    <div class="stat-number">15+</div>
                    <div class="stat-label">Issues Fixed</div>
                </div>
                <div class="stat">
                    <div class="stat-number">16</div>
                    <div class="stat-label">Files Optimized</div>
                </div>
            </div>
        </header>

        <!-- FEATURES SECTION -->
        <div class="card expandable">
            <div class="expandable-header open" onclick="toggleSection(this)">
                <h2 style="margin: 0;">âœ¨ Core Features</h2>
                <span class="expandable-icon open">â–¼</span>
            </div>
            <div class="expandable-content open">
                <div class="expandable-content-inner">
                    <div class="feature-grid">
                        <div class="feature-item">ğŸš€ High Deliverability - SPF, DKIM, DMARC</div>
                        <div class="feature-item">ğŸ“¦ Queue-Based Processing - BullMQ + Redis</div>
                        <div class="feature-item">ğŸ“§ Email Suppression - Auto bounce/complaint handling</div>
                        <div class="feature-item">ğŸ”„ Retry Logic - Exponential backoff</div>
                        <div class="feature-item">ğŸ’€ Dead Letter Queue - Auto DLQ for failed jobs</div>
                        <div class="feature-item">ğŸ” API Authentication - Secure API key management</div>
                        <div class="feature-item">âœ… Request Validation - Zod schema validation</div>
                        <div class="feature-item">â¤ï¸ Health Checks - Liveness & readiness endpoints</div>
                        <div class="feature-item">ğŸ“ Structured Logging - Pino logger with pretty printing</div>
                        <div class="feature-item">ğŸ“Š Comprehensive Metrics - Built-in metrics tracking</div>
                        <div class="feature-item">ğŸ›‘ Graceful Shutdown - Clean worker/server termination</div>
                        <div class="feature-item">ğŸ³ Docker Ready - Production-grade multi-stage build</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TECH STACK SECTION -->
        <div class="card expandable">
            <div class="expandable-header open" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸ› ï¸ Technology Stack</h2>
                <span class="expandable-icon open">â–¼</span>
            </div>
            <div class="expandable-content open">
                <div class="expandable-content-inner">
                    <div class="tech-stack">
                        <div class="tech-badge">Node.js 20+</div>
                        <div class="tech-badge">TypeScript</div>
                        <div class="tech-badge">Fastify</div>
                        <div class="tech-badge">PostgreSQL 15+</div>
                        <div class="tech-badge">Redis 7+</div>
                        <div class="tech-badge">BullMQ</div>
                        <div class="tech-badge">Prisma ORM</div>
                        <div class="tech-badge">AWS SES</div>
                        <div class="tech-badge">Docker</div>
                    </div>
                    <div class="code-block">Node v24.11.1 âœ“
npm v11.6.2 âœ“
TypeScript v5.6.0 âœ“
Fastify v4.0.0 âœ“
PostgreSQL 15 (ready)
Redis 7 (ready)</div>
                </div>
            </div>
        </div>

        <!-- QUICK START SECTION -->
        <div class="card expandable">
            <div class="expandable-header open" onclick="toggleSection(this)">
                <h2 style="margin: 0;">âš¡ 5-Minute Quick Start</h2>
                <span class="expandable-icon open">â–¼</span>
            </div>
            <div class="expandable-content open">
                <div class="expandable-content-inner">
                    <div class="code-block"># 1. Install dependencies
npm install

# 2. Generate Prisma client
npm run prisma:generate

# 3. Configure environment  
cp .env.example .env
# Edit .env with your settings

# 4. Setup database
npm run prisma:push
npm run seed

# 5. Generate API key
npm run gen-key "My Key"

# 6. Start development (open 2 terminals)
npm run dev:api      # Terminal 1: API Server
npm run dev:worker   # Terminal 2: Email Worker</div>
                </div>
            </div>
        </div>

        <!-- API SECTION -->
        <div class="card expandable">
            <div class="expandable-header" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸ”Œ API Endpoints</h2>
                <span class="expandable-icon">â–¼</span>
            </div>
            <div class="expandable-content">
                <div class="expandable-content-inner">
                    <h3 style="color: #667eea; margin-bottom: 15px;">Health & Status</h3>
                    <div class="code-block">GET /api/v1/health       # Liveness check (no auth)
GET /api/v1/ready        # Readiness check (no auth)
GET /api/v1/metrics      # Metrics dashboard (no auth)</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Admin Management (requires Bearer token)</h3>
                    <div class="code-block">GET    /api/v1/admin/keys            # List API keys
POST   /api/v1/admin/keys            # Create new key
DELETE /api/v1/admin/keys/:id        # Delete key
GET    /api/v1/admin/suppression     # View suppressed emails</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Templates (requires Bearer token)</h3>
                    <div class="code-block">GET    /api/v1/templates            # List templates
POST   /api/v1/templates            # Create template
PUT    /api/v1/templates/:id        # Update template
DELETE /api/v1/templates/:id        # Delete template</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Batch Sending (requires Bearer token)</h3>
                    <div class="code-block">POST   /api/v1/batches              # Send email batch
GET    /api/v1/batches/:id          # Get batch status
DELETE /api/v1/batches/:id          # Cancel batch</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Authentication</h3>
                    <div class="code-block">Authorization: Bearer YOUR_API_KEY

# Example:
curl -H "Authorization: Bearer sk_test_abc123..." \\
     http://localhost:3000/api/v1/admin/keys</div>
                </div>
            </div>
        </div>

        <!-- ARCHITECTURE SECTION -->
        <div class="card expandable">
            <div class="expandable-header" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸ—ï¸ Architecture</h2>
                <span class="expandable-icon">â–¼</span>
            </div>
            <div class="expandable-content">
                <div class="expandable-content-inner">
                    <div style="margin: 15px 0;">
                        <h3 style="color: #667eea; margin-bottom: 15px;">System Components</h3>
                        <div class="feature-grid">
                            <div class="feature-item"><strong>API Server</strong><br/>Fastify-based REST API with Zod validation</div>
                            <div class="feature-item"><strong>Email Worker</strong><br/>BullMQ worker processes email queue</div>
                            <div class="feature-item"><strong>Database</strong><br/>PostgreSQL with Prisma ORM</div>
                            <div class="feature-item"><strong>Message Queue</strong><br/>Redis with BullMQ for job processing</div>
                            <div class="feature-item"><strong>Email Provider</strong><br/>AWS SES for high deliverability</div>
                            <div class="feature-item"><strong>Webhooks</strong><br/>SES bounce/complaint notifications</div>
                        </div>
                    </div>
                    <div style="margin: 15px 0;">
                        <h3 style="color: #667eea; margin-bottom: 15px;">Data Flow</h3>
                        <div class="code-block">1. Client sends POST /api/v1/batches with email list
2. API validates request with Zod schemas
3. Emails stored in database (Batch, Recipient records)
4. Worker pulls batch from Redis queue
5. Worker sends each email via AWS SES
6. Results tracked in Event & Metric records
7. SES webhooks notify of bounce/complaint
8. Suppression rules auto-apply</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECURITY SECTION -->
        <div class="card expandable">
            <div class="expandable-header" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸ” Security Fixes Applied</h2>
                <span class="expandable-icon">â–¼</span>
            </div>
            <div class="expandable-content">
                <div class="expandable-content-inner">
                    <div style="margin: 15px 0;">
                        <h3 style="color: #ef4444; margin-bottom: 15px;">ğŸ”´ CRITICAL Fixes (3)</h3>
                        <div class="feature-grid">
                            <div class="feature-item" style="border-left-color: #ef4444;"><strong>Unauthenticated Admin Routes</strong><br/>âœ… Added Bearer token auth to all admin endpoints</div>
                            <div class="feature-item" style="border-left-color: #ef4444;"><strong>No Rate Limiting</strong><br/>âœ… Implemented rate limit middleware (100 req/15min)</div>
                            <div class="feature-item" style="border-left-color: #ef4444;"><strong>Unverified Webhooks</strong><br/>âœ… Added SES signature verification</div>
                        </div>
                    </div>

                    <div style="margin: 15px 0;">
                        <h3 style="color: #f97316; margin-bottom: 15px;">ğŸŸ  HIGH Priority Fixes (4)</h3>
                        <div class="feature-grid">
                            <div class="feature-item" style="border-left-color: #f97316;"><strong>Database Not Gracefully Closed</strong><br/>âœ… Added SIGINT/SIGTERM handlers</div>
                            <div class="feature-item" style="border-left-color: #f97316;"><strong>Worker Cleanup Missing</strong><br/>âœ… Proper disconnect sequence on shutdown</div>
                            <div class="feature-item" style="border-left-color: #f97316;"><strong>Missing Cascade Deletes</strong><br/>âœ… Added cascade delete relationships in Prisma</div>
                            <div class="feature-item" style="border-left-color: #f97316;"><strong>Poor Email Validation</strong><br/>âœ… RFC 5321 compliance with length checks</div>
                        </div>
                    </div>

                    <div style="margin: 15px 0;">
                        <h3 style="color: #22c55e; margin-bottom: 15px;">âš ï¸ MEDIUM Priority Improvements (4)</h3>
                        <div class="feature-grid">
                            <div class="feature-item"><strong>No Request Timeout</strong><br/>âœ… Set 30-second request timeout</div>
                            <div class="feature-item"><strong>Missing Database Indexes</strong><br/>âœ… Added indexes on query fields</div>
                            <div class="feature-item"><strong>Non-Portable SQL</strong><br/>âœ… Fixed health check for database portability</div>
                            <div class="feature-item"><strong>Subject Not Compiled</strong><br/>âœ… Template subjects now rendered with Handlebars</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DEPLOYMENT SECTION -->
        <div class="card expandable">
            <div class="expandable-header" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸš€ Deployment Options</h2>
                <span class="expandable-icon">â–¼</span>
            </div>
            <div class="expandable-content">
                <div class="expandable-content-inner">
                    <h3 style="color: #667eea; margin-bottom: 15px;">Option A: Docker Compose (Recommended)</h3>
                    <div class="code-block">docker-compose up

# Services started:
# - PostgreSQL (port 5432)
# - Redis (port 6379)  
# - API Server (port 3000)
# - Email Worker (background)</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Option B: Local Development</h3>
                    <div class="code-block"># Terminal 1: Start API
npm run dev:api

# Terminal 2: Start Worker
npm run dev:worker

# Terminal 3: Start Redis
redis-server

# Terminal 4: Start PostgreSQL
# (ensure service is running)</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Pre-Deployment Checklist</h3>
                    <div class="code-block">âœ“ npm run build                    # TypeScript compiles
âœ“ npm run prisma:push             # Database ready
âœ“ npm run seed                     # Test data loaded
âœ“ npm run gen-key "Prod Key"      # API key created
âœ“ curl http://localhost:3000/api/v1/health  # API responds
âœ“ Environment variables configured
âœ“ AWS SES verified & credentials set
âœ“ Database backups in place
âœ“ Redis persistence configured</div>
                </div>
            </div>
        </div>

        <!-- DOCUMENTATION SECTION -->
        <div class="card expandable">
            <div class="expandable-header" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸ“š Full Documentation</h2>
                <span class="expandable-icon">â–¼</span>
            </div>
            <div class="expandable-content">
                <div class="expandable-content-inner">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                        <div>
                            <h3 style="color: #667eea; margin-bottom: 10px;">Getting Started</h3>
                            <div class="card-links">
                                <a href="#" class="card-link">ğŸ“– README.md - Project overview</a>
                                <a href="#" class="card-link">âš¡ QUICK_REFERENCE.md - 2-min summary</a>
                                <a href="#" class="card-link">ğŸ”§ QUICKSTART.sh - Setup script</a>
                            </div>
                        </div>
                        <div>
                            <h3 style="color: #667eea; margin-bottom: 10px;">Deployment</h3>
                            <div class="card-links">
                                <a href="#" class="card-link">ğŸš€ PRODUCTION_DEPLOYMENT.md</a>
                                <a href="#" class="card-link">âœ… PRODUCTION_CHECKLIST.md</a>
                                <a href="#" class="card-link">ğŸ³ Dockerfile - Container setup</a>
                            </div>
                        </div>
                        <div>
                            <h3 style="color: #667eea; margin-bottom: 10px;">Technical Docs</h3>
                            <div class="card-links">
                                <a href="#" class="card-link">ğŸ—ï¸ ARCHITECTURE.md - System design</a>
                                <a href="#" class="card-link">ğŸ”Œ API_EXAMPLES.md - API reference</a>
                                <a href="#" class="card-link">ğŸ“‹ PRODUCTION_FEATURES.md - Features</a>
                            </div>
                        </div>
                        <div>
                            <h3 style="color: #667eea; margin-bottom: 10px;">Reference</h3>
                            <div class="card-links">
                                <a href="#" class="card-link">ğŸ” ISSUES_FIXED_REPORT.md - All fixes</a>
                                <a href="#" class="card-link">ğŸ“ PRODUCTION_FIXES.md - Details</a>
                                <a href="#" class="card-link">ğŸ†˜ TROUBLESHOOTING.md - Common issues</a>
                            </div>
                        </div>
                    </div>
                    <p style="color: #6b7280; font-size: 13px; margin-top: 20px;">ğŸ’¡ All files are .md format - open with any text editor in VS Code</p>
                </div>
            </div>
        </div>

        <!-- DIRECTORY STRUCTURE SECTION -->
        <div class="card expandable">
            <div class="expandable-header" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸ“ Project Structure</h2>
                <span class="expandable-icon">â–¼</span>
            </div>
            <div class="expandable-content">
                <div class="expandable-content-inner">
                    <div class="code-block">mailer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # REST API (Fastify)
â”‚   â”‚   â”œâ”€â”€ index.ts           # Entry point
â”‚   â”‚   â”œâ”€â”€ server.ts          # Server setup
â”‚   â”‚   â””â”€â”€ routes/            # API endpoints
â”‚   â”‚       â”œâ”€â”€ health.ts      # Health checks
â”‚   â”‚       â”œâ”€â”€ admin.ts       # Admin endpoints
â”‚   â”‚       â”œâ”€â”€ batches.ts     # Email batches
â”‚   â”‚       â”œâ”€â”€ templates.ts   # Email templates
â”‚   â”‚       â””â”€â”€ webhooks.ts    # SES webhooks
â”‚   â”œâ”€â”€ core/                  # Business logic
â”‚   â”‚   â”œâ”€â”€ mailer.ts          # Email sending
â”‚   â”‚   â”œâ”€â”€ templates.ts       # Template rendering
â”‚   â”‚   â”œâ”€â”€ events.ts          # Event tracking
â”‚   â”‚   â”œâ”€â”€ metrics.ts         # Metrics collection
â”‚   â”‚   â”œâ”€â”€ suppression.ts     # Suppression rules
â”‚   â”‚   â””â”€â”€ webhookSecurity.ts # Webhook verification
â”‚   â”œâ”€â”€ workers/               # Background jobs
â”‚   â”‚   â”œâ”€â”€ emailWorker.ts     # Email processor
â”‚   â”‚   â”œâ”€â”€ queue.ts           # Queue setup
â”‚   â”‚   â””â”€â”€ redis.ts           # Redis connection
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ client.ts          # Prisma client
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ apiKeyAuth.ts      # API key auth
â”‚   â”‚   â”œâ”€â”€ errorHandler.ts    # Error handling
â”‚   â”‚   â””â”€â”€ validation.ts      # Request validation
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ config.ts          # Config loader
â”‚   â”‚   â”œâ”€â”€ env.ts             # Env validation
â”‚   â”‚   â”œâ”€â”€ logger.ts          # Pino logger
â”‚   â”‚   â”œâ”€â”€ schemas.ts         # Zod schemas
â”‚   â”‚   â””â”€â”€ validation.ts      # Validators
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ seed.ts            # Database seeding
â”‚       â”œâ”€â”€ generateApiKey.ts  # Key generation
â”‚       â””â”€â”€ cleanupDLQ.ts      # DLQ cleanup
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma          # Database schema
â”œâ”€â”€ Dockerfile                 # Container image
â”œâ”€â”€ docker-compose.yml         # Multi-container setup
â”œâ”€â”€ package.json              # Dependencies
â”œâ”€â”€ tsconfig.json             # TypeScript config
â””â”€â”€ .env                      # Environment config</div>
                </div>
            </div>
        </div>

        <!-- TESTING SECTION -->
        <div class="card expandable">
            <div class="expandable-header" onclick="toggleSection(this)">
                <h2 style="margin: 0;">ğŸ§ª Testing & Verification</h2>
                <span class="expandable-icon">â–¼</span>
            </div>
            <div class="expandable-content">
                <div class="expandable-content-inner">
                    <h3 style="color: #667eea; margin-bottom: 15px;">Health Checks (No Auth Required)</h3>
                    <div class="code-block"># Liveness check
curl http://localhost:3000/api/v1/health

# Readiness check (includes DB & Redis)
curl http://localhost:3000/api/v1/ready

# Metrics
curl http://localhost:3000/api/v1/metrics</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Admin Authentication Test</h3>
                    <div class="code-block"># Generate API key first
npm run gen-key "Test Key"

# Then test auth endpoint
curl -X GET http://localhost:3000/api/v1/admin/keys \\
  -H "Authorization: Bearer YOUR_API_KEY"</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Rate Limiting Test</h3>
                    <div class="code-block"># Send 101 requests (should fail after 100)
for i in {1..101}; do 
  curl http://localhost:3000/api/v1/health 
done

# Should see: Too many requests (429 status)</div>

                    <h3 style="color: #667eea; margin: 20px 0 15px;">Email Batch Test</h3>
                    <div class="code-block">curl -X POST http://localhost:3000/api/v1/batches \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "template_id": "YOUR_TEMPLATE_ID",
    "recipients": [
      {"email": "user1@example.com", "name": "User 1"},
      {"email": "user2@example.com", "name": "User 2"}
    ]
  }'</div>
                </div>
            </div>
        </div>

        <footer>
            <p>ğŸ“§ Mailer - Production-Grade Bulk Email Service</p>
            <p style="margin-top: 8px;">Status: âœ… Production Ready | Last Updated: February 15, 2026</p>
            <p style="margin-top: 8px; color: #d1d5db;">Local Preview: http://localhost:8080 | API Server: http://localhost:3000</p>
        </footer>
    </div>
    
    <script>
        function toggleSection(header) {
            const icon = header.querySelector('.expandable-icon');
            const content = header.nextElementSibling;
            
            icon.classList.toggle('open');
            header.classList.toggle('open');
            content.classList.toggle('open');
        }

        document.querySelectorAll('.card-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                alert('ğŸ“‚ Open project files in VS Code:\n\n' + 
                    'â€¢ README.md\n' +
                    'â€¢ PROJECT_OVERVIEW.md\n' +
                    'â€¢ QUICK_REFERENCE.md\n' +
                    'â€¢ API_EXAMPLES.md\n' +
                    'â€¢ ARCHITECTURE.md\n' +
                    'â€¢ PRODUCTION_DEPLOYMENT.md\n' +
                    'â€¢ PRODUCTION_CHECKLIST.md\n' +
                    'â€¢ PRODUCTION_FIXES.md\n' +
                    'â€¢ ISSUES_FIXED_REPORT.md\n' +
                    'â€¢ TROUBLESHOOTING.md\n\n' +
                    'All files are in: C:\\Users\\hp\\OneDrive\\Desktop\\mailer\\mailer.txt\\');
            });
        });
    </script>
</body>
</html>
